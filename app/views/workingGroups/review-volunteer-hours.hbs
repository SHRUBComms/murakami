<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.12.1/bootstrap-table.min.css">

<!-- Latest compiled and minified JavaScript -->
<script src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.12.1/bootstrap-table.min.js"></script>

<div class="row">
   <h1>Review Volunteer Hours</h1>
</div>

{{#ifGreaterThan user.working_groups.length 1}}
<div class="row">
  <div class="form-group form-inline">
    <select class="form-control" id="working_groups">
      <option disabled selected>Select a working group...</option>
        {{#each user.working_groups}}
          <option value='{{group_id}}'{{#ifCond group_id '==' ../group.group_id}} selected{{/ifCond}}>{{name}}</option>
        {{/each}}
    </select>
  </div>
</div>
{{else}}
<div class="row">
  <h3>{{group.name}}</h3>
</div>
{{/ifGreaterThan}}

<div id="vol_hours_info" class="row"></div>

<div class="row">
   <table id="vol_hours" class="fadeIn" data-pagination="true" data-search="true" data-toggle="table" data-striped="true" data-url="/api/get/working-groups/volunteer-hours/{{group.group_id}}">
   	<thead>
   		<th data-sortable="true" data-field="name">Name</th>
   		<th data-sortable="true" data-field="date">Date</th>
   		<th data-sortable="true" data-field="duration">Duration (hours)</th>
      <th data-sortable="true" data-field="tokens">Tokens</th>
   		<th data-sortable="true" data-field="options"></th>
   	</thead>
   	<tbody>
   	</tbody>
   </table>
</div>

<script>
function volunteerHoursAjax(url){
   $.ajax({
      type: "GET",
      url: url,
      success: function(response){
        
      	if(response.status == "ok"){
        	$("#vol_hours_info").html('<div class="alert alert-success col-md-6" onclick="dismiss(\'#vol_hours_info\')">' + response.msg + '</div>');
			    $("#vol_hours").bootstrapTable('refresh');
      	} else {
      		$("#vol_hours_info").html('<div class="alert alert-danger col-md-6" onclick="dismiss(\'#vol_hours_info\')">' + response.msg + '</div>');
      	}
      }
   });
}

$('#working_groups').on('change', function () {
  var url = "/working-groups/review-volunteer-hours/" + $(this).val();
  window.location = url;
});

</script>