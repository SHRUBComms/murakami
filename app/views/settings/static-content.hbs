<!-- include summernote css/js -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.11/summernote-bs4.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.11/summernote-bs4.js"></script>

<!-- Include bootstrap checkbox style thing -->
<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>


<form action="{{public_address}}/settings/static-content/{{content.id}}" method="POST">


      <div class="row mt-4">
        <div class="col-md-8 mx-auto">
          <div class="form-group form-inline">
            <select class="form-control" id="content">
              <option selected disabled>Select static content to update...</option>
              {{#each staticContent}}
                  <option value="{{id}}" {{#ifCond id '==' ../content.id}}selected{{/ifCond}}>
                    {{data.title}}
                  </option>
              {{/each}}
            </select>
          </div>
        </div>
      </div>



      <div class="row mt-4">
        <div class="col-md-8 mx-auto">


            <div class="row mb-4 no-gutters">
              <div id="editor">
                  {{{content.data.markup}}}
              </div>
            </div>
            <input type="hidden" name="markup" />


        </div>
      </div>



      <div class="row mt-4">
        <div class="col-md-8 mx-auto">
          <input type="submit" class="btn btn-primary btn-block btn-lg" value="Update Content">
        </div>
      </div>


</form>

<script>

$('#content').on('change', function () {
    var url = "{{public_address}}/settings/static-content/" + $(this).val();
    window.location = url;
});

function update_preview(){
    $("input[name=markup]").val($("#editor").summernote('code'));
}

$("document").ready(function(){
    $('#editor').summernote();
    update_preview();
});

$('#editor').on('summernote.change', function(we, contents, $editable) {
  update_preview();
});

</script>
